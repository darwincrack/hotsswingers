{"version":3,"sources":["app-directive.js","stream-video-player.directive.js","convert-to-number.js","chat-text.directive.js","private-chat-video.directive.js","group-chat-video.directive.js","upload-file.js","multiple-upload.js","check-user-online.directive.js"],"names":["angular","module","directive","require","link","scope","elem","attrs","ctrl","firstPassword","pwCheck","add","on","$apply","$setValidity","val","$","elm","$validators","integer","modelValue","viewValue","$isEmpty","INTEGER_REGEXP","test","restrict","message","controller","$scope","alertify","success","URL_REGEXP","element","isValidUrl","hasClass","removeClass","addClass","socket","userService","$window","inRoom","$timeout","$uibModal","appSettings","USER","sessionStorage","closePopup","autoInstance","open","animation","templateUrl","BASE_URL","Math","random","toString","slice","backdrop","size","keyboard","result","then","res","data","role","id","model","findMember","from","user","status","requestUrl","room","virtualRoom","name","firstName","lastName","username","avatar","confirm","location","href","callBackDenial","setting","setHeader","autoCancel","msg","callback","isClicked","remove","totalRequest","length","text","emit","EMAIL_REGEXP","email","fallbackSrc","postLink","iElement","iAttrs","bind","attr","$el","$attr","ngModel","emojiarea","path","options","$eval","wysiwyg","$wysiwyg","$setViewValue","e","code","keyCode","which","trigger","preventDefault","$formatters","push","siblings","$sce","template","replace","vidSrc","showControl","vid","muted","console","log","videoId","isMuted","jQuery","context","firstChild","trustSrc","undefined","trustAsResourceUrl","controls","$parsers","parseInt","chatService","_","modelId","chatType","memberId","roomId","isStreaming","streamingInfo","PerformerChat","onlineService","chatPanel","hightLighTab","intervalChecking","setInterval","video","find","height","Performerchat","chatMessages","lastpage","orderBy","sort","limit","enableLoadMore","showLoading","isShowPrivateRequest","isOffline","isShowResetMessage","isShowRemoveMessage","loadPreviousMessage","findByModel","type","page","concat","last_page","currentpage","current_page","myInfo","userData","get","clone","tokens","members","guests","getOnlineMembers","onlineMembers","copy","mems","filter","m","$$phase","onModelReceiveInfo","member","existed","time","spendTokens","onMemberJoin","extised","onLeaveRoom","currentObject","joinRoomData","joinRoom","send","keyEvent","trim","sendMessage","sendTip","prompt","evt","value","isNumber","sendTokens","response","error","isOnline","notify","checkBanNick","lock","msgId","Date","now","sendObj","alert","sendChatMessage","createdAt","userId","focus","$emit","window","onReceiveChatMessage","ownerId","beep","unique","getTime","snd","Audio","play","onReceiveTip","tip","reqPrivateChat","reqGroupChat","banNick","index","addBlackList","findIndex","o","banStatus","unlockNick","removeBlackList","videoRequests","resetMessage","removeMsg","msgs","item","removeMessage","set","changeTab","tab","reloadUsersToken","userIds","map","getToken","join","i","ele","$on","each","outerHeight","animate","scrollTop","$interval","VideoStream","peerService","userRole","hasRoom","removeMyRoom","second","sendCallRequest","endStream","connection","isRoomOpened","roomid","userStreaming","errors","ROOM_NOT_AVAILABLE","acceptRequest","isJoinedRoom","ROOM_FULL","modelStreaming","RTCMultiConnection","maxParticipantsAllowed","socketURL","RTC_URL","socketMessageEvent","session","audio","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","videosContainer","document","getElementById","intervalPayment","onstream","event","existing","streamid","parentNode","removeChild","mediaElement","removeAttribute","volume","createElement","setAttributeNode","createAttribute","setAttribute","srcObject","stream","className","appendChild","setTimeout","localStorage","setItem","sessionid","getAllParticipants","reload","sendPaidTokens","onstreamended","onMediaError","DetectRTC","audioInputDevices","secondaryMic","deviceId","mediaConstraints","onclick","stopStreaming","spend","sendModelReceiveInfo","isFullScreenMode","showFullScreen","notShowFullScreen","onModelRoom","streams","isShowLargeVideo","startConversation","joinGroupRoom","joinConversation","streamId","str","videoCurr","mediaService","myfiles","fileName","multiple","showDelete","showPreview","allowedTypes","mediaType","parentId","showDone","current","$render","settings","url","method","statusBarWidth","dragdropWidth","onSuccess","files","xhr","file","html","onError","errMsg","deleteCallback","pd","indexOf","deleteImage","splice","deleteVideo","uploadFile","myFiles","uploadName","filename","innerHTML","checkBusy","isBusy","online"],"mappings":"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","file":"directive.js","sourcesContent":["/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n\n\n\n'use strict';\n\nangular.module('matroshkiApp')\n        .directive('pwCheck', [function () {\n                return {\n                    require: 'ngModel',\n                    link: function (scope, elem, attrs, ctrl) {\n                        var firstPassword = '#' + attrs.pwCheck;\n                        elem.add(firstPassword).on('keyup', function () {\n                            scope.$apply(function () {\n                                // console.info(elem.val() === $(firstPassword).val());\n                                ctrl.$setValidity('pwmatch', elem.val() === $(firstPassword).val());\n                            });\n                        });\n                    }\n                };\n            }])\n\n        .directive('integer', function () {\n            return {\n                require: 'ngModel',\n                link: function (scope, elm, attrs, ctrl) {\n                    ctrl.$validators.integer = function (modelValue, viewValue) {\n                        if (ctrl.$isEmpty(modelValue)) {\n                            // consider empty models to be valid\n                            return true;\n                        }\n                        var INTEGER_REGEXP = /^\\-?\\d+$/;\n                        if (INTEGER_REGEXP.test(viewValue)) {\n                            // it is valid\n                            return true;\n                        }\n\n                        // it is invalid\n                        return false;\n                    };\n                }\n            };\n        })\n        .directive('welcomeMessage', function () {\n            return {\n                restrict: 'AE',\n                scope: {\n                    message: '@message'\n                },\n                controller: function ($scope) {\n                    if ($scope.message != '') {\n                        alertify.success($scope.message, 20);\n                    }\n                }\n            };\n        })\n\n        .directive('validateWebAddress', function () {\n            var URL_REGEXP = /^((?:http|ftp)s?:\\/\\/)(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}\\.?|[A-Z0-9-]{2,}\\.?)|localhost|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})(?::\\d+)?(?:\\/?|[\\/?]\\S+)$/i;\n            return {\n                require: 'ngModel',\n                restrict: 'A',\n                link: function (scope, element, attrs, ctrl) {\n                    element.on(\"keyup\", function () {\n                        var isValidUrl = URL_REGEXP.test(element.val());\n                        if (isValidUrl && element.hasClass('alert-danger') || element.val() == '') {\n                            element.removeClass('alert-danger');\n                        } else if (isValidUrl == false && !element.hasClass('alert-danger')) {\n                            element.addClass('alert-danger');\n                        }\n                    });\n                }\n            };\n        })\n        .directive('welcomePopup', [ 'socket', 'userService', '$window', function (socket, userService, $window) {\n            return {\n                restrict: 'EA',\n                scope: {\n                    inRoom: '=inRoom'\n                },\n                controller: function ($scope, $timeout, $uibModal, appSettings) {\n                    \n                    if (!appSettings.USER && !sessionStorage.closePopup) {\n                        $timeout(function () {\n                            var autoInstance = $uibModal.open({\n                                animation: true,\n                                templateUrl: appSettings.BASE_URL + 'app/modals/register-modal/modal.html?v=' + Math.random().toString(36).slice(2),\n                                controller: 'RegisterInstanceCtrl',\n                                backdrop: 'static',\n                                size: 'lg welcome',\n                                keyboard: false\n                            });\n                            autoInstance.result.then(function (res) {\n\n                            });\n                        }, 3);\n                    }\n                    \n                    socket.on('video-chat-request', function (data) {\n                        //get request name\n                        //\n\n                        if (appSettings.USER && appSettings.USER.role == 'model' && appSettings.USER.id == data.model) {\n                            userService.findMember(data.from).then(function (user) {\n\n                                if (user.status == 200 && user.data.id) {\n                                    //show messages for private request\n                                    data.requestUrl = appSettings.BASE_URL + 'models/privatechat/' + data.from + '?roomId=' + data.room + '&vr=' + data.virtualRoom;\n                                    data.name = user.data.firstName + ' ' + user.data.lastName;\n                                    data.username = user.data.username;\n                                    data.avatar = user.data.avatar;\n                                    \n                                    //show as confirm\n                                    if(!$scope.inRoom){\n                                            \n                                            alertify.confirm(data.name + ' send private chat request.', function(){\n                                            $window.location.href = data.requestUrl;\n                                        },function(){\n                                            callBackDenial(data);\n\n                                        }).setting('labels',{'ok':'Accept', 'cancel': 'Deny'}).setHeader('Private Chat').autoCancel(25).setting('modal', false);\n                                    }else{\n                                        var msg = alertify.message('You just received a private call request from ' + data.name + ', click here to accept.',25);\n                                        msg.callback = function (isClicked) {\n                                            if (isClicked)\n                                                $window.location.href = data.requestUrl;\n                                            else\n                                                callBackDenial(data);\n    \n                                        };\n                                    }\n                                }\n                            });\n                        }\n                    });\n                    function callBackDenial(data){\n                        angular.element('ul.list-user li#private-'+data.from).remove();\n                        var totalRequest = angular.element('.tab-content .tab-private ul.list-user li').length;\n\n                        angular.element('span#private-amount').text(totalRequest);\n                        socket.emit('model-denial-request', data.virtualRoom);\n                    }\n                    \n                }\n            };\n        }])\n        .directive('validateEmail', function () {\n            var EMAIL_REGEXP = /^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/;\n\n            return {\n                require: 'ngModel',\n                restrict: '',\n                link: function (scope, elm, attrs, ctrl) {\n                    // only apply the validator if ngModel is present and Angular has added the email validator\n                    if (ctrl && ctrl.$validators.email) {\n\n                        // this will overwrite the default Angular email validator\n                        ctrl.$validators.email = function (modelValue) {\n                            return ctrl.$isEmpty(modelValue) || EMAIL_REGEXP.test(modelValue);\n                        };\n                    }\n                }\n            };\n        })\n        .directive('fallbackSrc', function () {\n            var fallbackSrc = {\n                link: function postLink(scope, iElement, iAttrs) {\n                    iElement.bind('error', function () {\n                        angular.element(this).attr(\"src\", iAttrs.fallbackSrc);\n                    });\n                }\n            }\n            return fallbackSrc;\n        })\n        .directive('emojiInput', [ '$timeout', function ($timeout) {\n    return {\n        restrict: 'A',\n        require: 'ngModel',\n        link: function ($scope, $el, $attr, ngModel) {\n            $.emojiarea.path = '/lib/jquery-emojiarea-master/packs/basic/images';\n            \n            var options = $scope.$eval({wysiwyg:true});\n            var $wysiwyg =  $($el[0]).emojiarea(options);\n            $wysiwyg.on('change', function () {\n                ngModel.$setViewValue($wysiwyg.val());\n                $scope.$apply();\n            });\n            \n         $('.chat-mes').on('keypress',function(e) {\n\n            var code = e.keyCode || e.which;\n            if(code == 13) {\n                angular.element('#send-message').trigger('click');\n               e.preventDefault();\n            }\n         });\n            ngModel.$formatters.push(function (data) {\n                // emojiarea doesn't have a proper destroy :( so we have to remove and rebuild\n                $wysiwyg.siblings('.emoji-wysiwyg-editor, .emoji-button').remove();\n                $timeout(function () {\n                    $wysiwyg.emojiarea(options);\n                }, 0);\n                return data;\n            });\n        }\n    };\n}]);","'use strict';\n\nangular.module('matroshkiApp').directive('videoPlayer', ['$sce', function ($sce) {\n  return {\n    template: '<div><video ng-src=\"{{trustSrc()}}\" id=\"streaming-{{videoId}}\" autoplay  class=\"img-responsive\" height=\"130px\"></video></div>',\n    restrict: 'E',\n    replace: true,\n    scope: {\n      vidSrc: '@',\n      showControl: '@',\n      vid: '@',\n      muted:'='\n    },\n    link: function link(scope, elem, attr) {\n      console.log('Initializing video-player');\n      scope.videoId = scope.vid;\n      scope.isMuted = scope.muted ? 'muted':'';\n        if(scope.isMuted){\n        jQuery(elem.context.firstChild).attr('muted',true);\n         elem.context.firstChild.muted = true;\n       }\n      \n      scope.trustSrc = function () {\n        if (!scope.vidSrc) {\n          return undefined;\n        }\n        return $sce.trustAsResourceUrl(scope.vidSrc);\n      };\n      if (scope.showControl && elem.context && elem.context.firstChild) {\n        elem.context.firstChild.controls = true;\n      }\n    }\n  };\n}]);","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n\n\nangular.module('matroshkiApp').directive('convertToNumber', function() {\n  return {\n    require: 'ngModel',\n    link: function(scope, element, attrs, ngModel) {\n      ngModel.$parsers.push(function(val) {\n        return parseInt(val);\n      });\n      ngModel.$formatters.push(function(val) {\n        return '' + val;\n      });\n    }\n  };\n});","'use strict';\n\nangular.module('matroshkiApp').directive('mChatText', ['appSettings', 'chatService', '_', '$uibModal', function (appSettings, chatService, _, $uibModal) {\n    return {\n      restrict: 'AE',\n      templateUrl: appSettings.BASE_URL + 'app/views/partials/chat-text-widget.html',\n      scope: {\n        modelId: '=modelId',\n        chatType: '@chatType',\n        memberId: '@',\n        roomId: '@',\n        isStreaming: '@',\n        streamingInfo : \"=ngModel\"\n      },\n      controller: function ($scope, $timeout, appSettings, PerformerChat, $uibModal, socket, $sce, userService, chatService, onlineService) {\n        $scope.chatPanel = 'chats';\n        $scope.hightLighTab = false;\n        //redirect to private chat if group_chat_allowed is no\n        var intervalChecking = setInterval(function(){\n          var video = $('#videos-container').find('video');\n          if(video.height() && video.height() > 0) {\n            $('.list-chat').height(video.height() - 100);\n          }\n        }, 3000);\n\n        $scope.Performerchat = PerformerChat;\n        $scope.chatMessages = [];\n        $scope.lastpage = 1;\n        $scope.orderBy = 'createdAt';\n        $scope.sort = 'desc';\n        $scope.limit = 20;\n        $scope.enableLoadMore = false;\n        $scope.showLoading = false;\n        $scope.isShowPrivateRequest = false;\n        $scope.isOffline = false;\n        $scope.isShowResetMessage = false;\n        $scope.isShowRemoveMessage = false;\n        if(appSettings.USER && appSettings.USER.role === 'model') {\n          $scope.isShowResetMessage = true;\n          $scope.isShowRemoveMessage = true;\n        }\n\n        ////load messages at first time\n        // chatService.findByModel({\n        //   modelId: $scope.modelId,\n        //   memberId: $scope.memberId || '',\n        //   type: $scope.chatType,\n        //   page: $scope.lastpage,\n        //   orderBy: $scope.orderBy,\n        //   sort: $scope.sort,\n        //   limit: $scope.limit\n        // }).success(function (res) {\n        //   $scope.chatMessages = $scope.chatMessages.concat(res.data);\n        //   //$scope.gotoAnchor($scope.chatMessages.length - 1);\n\n        //   if (res.last_page > $scope.lastpage) {\n\n        //     $scope.lastpage += 1;\n\n        //     $scope.enableLoadMore = true;\n        //   } else {\n        //     $scope.enableLoadMore = false;\n        //   }\n        //   $scope.currentpage = res.current_page;\n\n        //   //scroll to bottom\n        //   $timeout(function () {\n        //     $scope.$emit('new-chat-message');\n        //   });\n        // });\n\n        $scope.loadPreviousMessage = function () {\n\n          if ($scope.enableLoadMore) {\n            $scope.showLoading = true;\n            chatService.findByModel({\n              modelId: $scope.modelId,\n              memberId: $scope.memberId || '',\n              type: $scope.chatType,\n              page: $scope.lastpage,\n              orderBy: $scope.orderBy,\n              sort: $scope.sort,\n              limit: $scope.limit\n            }).success(function (res) {\n              $scope.chatMessages = $scope.chatMessages.concat(res.data);\n              $scope.showLoading = false;\n              if (res.last_page > $scope.lastpage) {\n                $scope.lastpage += 1;\n\n                $scope.enableLoadMore = true;\n              } else {\n                $scope.enableLoadMore = false;\n              }\n              $scope.currentpage = res.current_page;\n\n            });\n          }\n        };\n\n        $scope.data = {text: ''};\n//        $.emoticons.define(emoticonsData);\n//        $scope.$on('emoticonsParser:selectIcon', function (event, icon) {\n//          $scope.data.text += ' ' + icon;\n//          $scope.$$phase || $scope.$apply();\n//        });\n\n        //get my info\n        //\n        var myInfo = [];\n        $scope.userData = appSettings.USER;\n\n\n\n        userService.get().then(function (data) {\n          if (data.data != \"\") {\n            $scope.userData = _.clone(data.data);\n            $scope.streamingInfo.tokens = data.data.tokens;\n          } else {\n            $scope.userData = {\n              id: 0,\n              username: 'guest',\n              avatar: ''\n            };\n          }\n        });\n        \n        $scope.members = {};\n        $scope.guests = [];\n        socket.getOnlineMembers($scope.roomId);\n        socket.onlineMembers(function (data) {\n          $scope.members = angular.copy(data.members);\n          const mems = angular.copy($scope.members);\n          // if(appSettings.USER){\n          //   _.remove($scope.members, function (currentObject) {\n          //     return currentObject.id == appSettings.USER.id;\n          //   });\n          // }else {\n          //   _.remove($scope.members, function (currentObject) {\n          //     return currentObject.id == appSettings.IP;\n          //   });\n          // }\n          $scope.guests = mems.filter(function(m) {\n            return m.role === 'guest';\n          });\n          $scope.$$phase || $scope.$apply();\n        });\n         socket.onModelReceiveInfo(function (data){\n            if(data.member){\n                var existed = _.find($scope.members, ['id', data.member]);\n                if(existed){\n                    existed.time = (existed.time) ? existed.time + parseInt(data.time) : parseInt(data.time);\n                    existed.spendTokens = (existed.spendTokens) ? existed.spendTokens + parseInt(data.tokens) : parseInt(data.tokens);\n                }\n            } \n         });\n\n        \n        //listen event when member is online\n        socket.onMemberJoin(function (data) {\n         console.log('onmenberjoin', data);\n          if(data && data.id != $scope.modelId){\n//            console.log(data, $scope.members);\n            var extised = _.find($scope.members, ['id', data.id]);\n            if(!extised){\n                $scope.members.push(angular.copy(data));\n                const mems = angular.copy($scope.members);\n                $scope.guests = mems.filter(function(m) {\n                  return m.role === 'guest';\n                });\n            }\n          }\n\n          if ($scope.userData && $scope.userData.role == 'model') {\n            if (data && typeof data.username != 'undefined' && $scope.chatType != 'private') {\n              alertify.message(data.username + \" join the room.\");\n            }\n          }\n          //TODO: get user join data via api and show on model message by userId\n          //update view\n         \n          $scope.$$phase || $scope.$apply();\n        });\n        \n        //listen event when member is leave\n        socket.onLeaveRoom(function (data) {\n//          console.log(data, $scope.chatType);\n          if (($scope.userData && $scope.userData.role == 'model' && data && data.username && $scope.chatType == 'public') || $scope.chatType == 'group') {\n            alertify.message(data.username + \" left the room\");\n            \n          }\n          if($scope.chatType == 'private'){\n//              socket.emit('model-leave-room');\n          }\n          \n          \n          _.remove($scope.members, function (currentObject) {\n            return currentObject.id === data.id;\n          });\n          //update view\n          $scope.$$phase || $scope.$apply();\n        });\n\n\n\n        //if user is not anonymous, join to group chat\n        if (!appSettings.USER) {\n\n          if ($scope.chatType === 'private') {\n            //request to join private room\n            socket.emit('join-private-room', {\n              modelId: $scope.modelId,\n              memberId: $scope.memberId\n            }, function (data) {\n              //assign room id to the thread\n              roomId = data.id;\n            });\n          } else {\n            //join to public room\n            var joinRoomData = {\n              roomId: $scope.roomId,\n              userData: $scope.userData,\n              type: $scope.chatType\n            };\n\n            socket.joinRoom(joinRoomData);\n          }\n        } else {\n          var joinRoomData = {\n            roomId: $scope.roomId,\n            userData: $scope.userData,\n            type: $scope.chatType\n          };\n\n          socket.joinRoom(joinRoomData);\n        }\n\n        $scope.send = function (keyEvent) {\n          if ((keyEvent && keyEvent.keyCode === 13) || !keyEvent) {\n              \n            //allow once user inputs text only\n            var text = $scope.data.text.trim();\n            sendMessage(text);\n            \n            $scope.data.text = '';\n            \n          }\n        };\n\n        //send tips\n        $scope.sendTip = function () {\n\n          alertify.prompt(\"Enter your tips.\", 10,\n                  function (evt, value) {\n                    if (angular.isNumber(parseInt(value)) && parseInt(value) > 0) {\n                      userService.sendTokens($scope.roomId, parseInt(value)).then(function (response)\n                      {\n                        if (response.data.success == false) {\n                          alertify.error(response.data.message);\n                          return;\n                        } else {\n                          alertify.success(response.data.message);\n                          sendMessage('Send ' + parseInt(value) + ' tokens');\n                        }\n                      });\n                    } else {\n                      alertify.error('Please enter a number.');\n                      $scope.sendTip();\n                    }\n\n\n                  });\n        };\n\n\n\n        function sendMessage(message) {\n          socket.emit('checkOnline', $scope.modelId.toString(), function(data) {\n            if(!data.isOnline) {\n              return alertify.error('Model is now offline');\n            }\n             //check room id\n            //TODO - wait timeout\n            if (!$scope.roomId) {\n              return alertify.notify('Room does not exist.', 'warning');\n            }\n            if (typeof message !== 'undefined' && message != '') {\n              userService.checkBanNick($scope.modelId).then(function (data) {\n                if (data.data.success && data.data.lock == 'no') {\n                  const msgId = Date.now();\n                  var sendObj = {\n                    roomId: $scope.roomId,\n                    text: message,\n                    type: $scope.chatType,\n                    id: msgId                  \n                  };\n                  if (!appSettings.USER) {\n                    return alertify.alert('Warning', 'Please login to enter new message.');\n\n                  }\n\n                  //emit chat event to server\n                  socket.sendChatMessage(sendObj);\n\n  //                var icon = $.emoticons.replace(message);\n                  \n                  $scope.chatMessages.push({text: message, username: $scope.userData.username, createdAt: new Date(), userId: appSettings.USER.id, id: msgId});\n                  $scope.data.text = '';\n                  angular.element('.emoji-wysiwyg-editor').focus();\n                  $scope.$emit('new-chat-message');\n                } else {\n                  alertify.error(data.data.message);\n                }\n\n              });\n\n            }\n          });\n         \n        }\n\n        /**\n         * @requires user is premium and premium chat only\n         * @returns check and process payment for premium\n         */\n        if ($scope.chatType != 'public' && !appSettings.USER) {\n          alertify.alert('Warning', 'Please login to join this room.');\n          window.location.href = '/';\n        }\n\n        //add handler for new message from server\n        socket.onReceiveChatMessage(function (data) {\n//          var icon = data.text;\n//\n//          icon = $.emoticons.replace(data.text);\n//        console.log(data.message.ownerId);\n          $scope.chatMessages.push({text: data.text, username: data.username, createdAt: data.createdAt, userId: data.message.ownerId, id: data.id});\n          //calculate position and scroll to bottom\n          $scope.$emit('new-chat-message');\n        });\n        //get send tip event\n        function beep() {\n          const unique = new Date().getTime();\n          var snd = new Audio(\"/sounds/received_message.mp3?v=\" + unique);\n          snd.play();\n        }\n        socket.onReceiveTip(function (data) {\n          $scope.chatMessages.push({text: data.text, tip: 'yes', username: data.username, createdAt: data.createdAt});\n          //calculate position and scroll to bottom\n          $scope.$emit('new-chat-message');\n          beep();\n        });\n        \n        \n        //check group and private chat init\n        socket.reqPrivateChat($scope.modelId);\n        socket.reqGroupChat($scope.modelId);\n        $scope.banNick = function (user, index) {\n          userService.addBlackList(user.username).then(function (data) {\n            if (data.data.success) {\n              alertify.success(data.data.message);\n              _.findIndex($scope.chatMessages, function (o) {\n                if (o.username == user.username) {\n                  o.banStatus = 'yes';\n                }\n              });\n            } else {\n              alertify.error(data.data.message);\n            }\n          });\n        };\n        $scope.unlockNick = function (user, index) {\n          userService.removeBlackList(user.username).then(function (data) {\n            if (data.data.success) {\n              alertify.success(data.data.message);\n              _.findIndex($scope.chatMessages, function (o) {\n                if (o.username == user.username) {\n                  o.banStatus = 'no';\n                }\n              });\n            } else {\n              alertify.error(data.data.message);\n            }\n          });\n        };\n        \n        if(appSettings.USER && $scope.modelId == appSettings.USER.id){\n            $scope.isShowPrivateRequest = true;\n        }\n        \n         //TODO - move to global controller\n        //this is for test only\n        $scope.videoRequests = [];\n        socket.on('video-chat-request', function (data) {\n          //get request name\n          //\n//          console.log(data);\n          if($scope.modelId == data.model) {\n            userService.findMember(data.from).then(function (user){\n              if(user.status == 200 && user.data.id){\n                //show messages for private request\n                data.requestUrl = appSettings.BASE_URL + 'models/privatechat/' + data.from + '?roomId=' + data.room + '&vr=' +data.virtualRoom;\n                data.name = user.data.firstName + ' ' + user.data.lastName;\n                data.username = user.data.username;\n                data.avatar = user.data.avatar;\n                data.id = user.data.id;\n                var existed = _.find($scope.videoRequests, ['from', data.from]);\n                if(existed){\n                    existed.requestUrl = data.requestUrl;\n                }else{\n                      $scope.videoRequests.push(data);\n                }\n                if($scope.chatPanel !== 'privateChat'){\n                  $scope.hightLighTab = true;\n                }\n              }\n            });\n          }\n        });\n        socket.on('stop-video-request', function (data) {\n          if($scope.modelId == data.model) {\n            _.remove($scope.videoRequests, ['from', data.from]);\n          }\n        });\n\n        $scope.resetMessage = function(){\n          $scope.chatMessages = [];\n          socket.emit('reset-chat-message',{\n            roomId: $scope.roomId\n          });\n        };\n        socket.on('reset-chat-message', function(data) {\n          $scope.chatMessages = [];\n        });\n        function removeMsg(msgId){\n          const msgs = angular.copy($scope.chatMessages);\n          $scope.chatMessages  = msgs.filter(function(item) {\n            return item.id !== msgId;\n          });\n          $scope.$$phase || $scope.$apply();\n        }\n        $scope.removeMessage = function(msgId){\n          alertify.confirm(\"Are you sure you want to delete this message?\",\n          function () {\n            removeMsg(msgId);\n            socket.emit('remove-chat-message',{\n              msgId: msgId\n            });\n          }).set('title', 'Confirm');\n        };\n        socket.on('remove-chat-message', function(data) {\n          console.log(data);\n          console.log($scope.chatMessages);\n          removeMsg(data.msgId);\n        });\n        $scope.changeTab = function(tab) {\n          $scope.chatPanel = tab;\n          if($scope.chatPanel === 'privateChat'){\n            $scope.hightLighTab = false;\n            reloadUsersToken();\n          }\n        };\n        function reloadUsersToken() {\n          var userIds = [];\n          const members = angular.copy($scope.videoRequests);\n          _.map(members, function(member){\n              userIds.push(member.from);\n          });\n          userService.getToken(userIds.join()).success(function(data){\n            for(var i in members){\n              var member = _.find(data, function(o) { return o.id === members[i].from; });\n              $scope.videoRequests[i].tokens = member.tokens;\n            }\n            $scope.$$phase || $scope.$apply();            \n          });\n        }\n      }\n    };\n  }\n])\n        .directive('mChatScroll', ['$', function ($) {\n            return {\n              link: function (scope, ele) {\n                scope.$on('new-chat-message', function () {\n\n                  //check current scroll of the div\n//                  var height = $('.list-chat', $(ele)).outerHeight();\n\n                  //TODO - check position on scroll\n//                  if($ele.scrollTop() + $ele.innerHeight() >= $(ele)[0].scrollHeight) {\n//                    alert('end reached');\n//                  }\n//                  \n\n                  var height = $('.list-chat', $(ele)).height();\n                  ele.find('li').each(function (i, value) {\n                    height += parseInt($(this).outerHeight());\n                  });\n\n                  $('.list-chat', ele).animate({scrollTop: height});\n//                  ele.animate({scrollTop: height});\n                });\n              }\n            };\n          }]);\n","'use strict';\n\nangular.module('matroshkiApp')\n.directive('mPrivateChatVideo', ['appSettings', '$timeout', '$interval', 'socket', 'VideoStream', 'peerService', '$sce', 'userService', 'onlineService', function(appSettings, $timeout, $interval, socket, VideoStream, peerService, $sce, userService, onlineService) {\n  return {\n    restrict: 'AE',\n    templateUrl: appSettings.BASE_URL + 'app/views/partials/private-chat-video-widget.html',\n    scope: {\n      modelId: '=modelId',\n      memberId: '=memberId',\n      room: '@',\n      virtualRoom: '@',\n      streamingInfo : \"=ngModel\"\n    },\n    controller: function($scope, socket, userService, PerformerChat, $timeout, $window) {\n      $scope.userRole = appSettings.USER.role;\n      $scope.streamingInfo.type = 'private';\n      $scope.streamingInfo.hasRoom = true;\n      $scope.streamingInfo.removeMyRoom = false;\n      $scope.second = 60;\n      $scope.sendCallRequest = function() {\n        socket.emit('checkOnline', $scope.modelId.toString(), function(data) {\n          if(!data.isOnline) {\n            return alertify.error('Model is now offline');\n          }\n          //check user token before start connect.\n          userService.get().then(function (data) {\n            if (data.data) {\n              if(parseInt(data.data.tokens) < 1){\n                return alertify.error('Credit is finished and chat will end', 6, function() {\n                  return endStream();\n                })\n              } else {\n                // open room for streaming\n                connection.open($scope.virtualRoom, function(isRoomOpened, roomid, error) {\n                  if (isRoomOpened === true) {\n                    $scope.userStreaming = true;\n                    peerService.joinRoom($scope.virtualRoom, {\n                      memberId: $scope.memberId,\n                      modelId: $scope.modelId,\n                      room: $scope.room\n                    });\n                  } else {\n                    if (error === connection.errors.ROOM_NOT_AVAILABLE) {\n                        alert('Someone already created this room. Please either join or create a separate room.');\n                        return;\n                    }\n                    alert(error);\n                  }\n                });\n              }\n            } else {\n              return false;\n            }\n          });\n        });\n\n      };\n      $scope.acceptRequest = function() {\n          connection.join($scope.virtualRoom, function(isJoinedRoom, roomid, error) {\n              if (error) {\n                  if (error === connection.errors.ROOM_NOT_AVAILABLE) {\n                      alert('This room does not exist. Please either create it or wait for moderator to enter in the room.');\n                      return;\n                  }\n                  if (error === connection.errors.ROOM_FULL) {\n                      alert('Room is full.');\n                      return;\n                  }\n                  alert(error);\n                  return;\n              }\n              peerService.joinRoom($scope.virtualRoom, {\n                memberId: $scope.memberId,\n                modelId: $scope.modelId,\n                room: $scope.room\n              });\n              $scope.modelStreaming = true;\n          });\n      };\n      var connection = new RTCMultiConnection();\n      // maximum two users are allowed to join single room\n      connection.maxParticipantsAllowed = 2;\n      connection.socketURL = appSettings.RTC_URL;\n      connection.socketMessageEvent = 'one-to-one-' + $scope.room;\n      connection.session = {\n          audio: true,\n          video: true\n      };\n      connection.sdpConstraints.mandatory = {\n          OfferToReceiveAudio: true,\n          OfferToReceiveVideo: true\n      };\n      connection.videosContainer = document.getElementById('private-videos-container');\n      var intervalPayment = null;\n      connection.onstream = function(event) {\n        var existing = document.getElementById(event.streamid);\n        if (existing && existing.parentNode) {\n            existing.parentNode.removeChild(existing);\n        }\n        event.mediaElement.removeAttribute('src');\n        event.mediaElement.removeAttribute('srcObject');\n        event.mediaElement.muted = true;\n        event.mediaElement.volume = 0;\n        var video = document.createElement('video');\n        try {\n            video.setAttributeNode(document.createAttribute('autoplay'));\n            video.setAttributeNode(document.createAttribute('playsinline'));\n        } catch (e) {\n            video.setAttribute('autoplay', true);\n            video.setAttribute('playsinline', true);\n        }\n        if (event.type === 'local') {\n            video.volume = 0;\n            try {\n                video.setAttributeNode(document.createAttribute('muted'));\n            } catch (e) {\n                video.setAttribute('muted', true);\n            }\n        }\n        video.srcObject = event.stream;\n        video.controls = true;\n        video.className = event.type;\n        connection.videosContainer.appendChild(video);\n        setTimeout(function() {\n            video.play();\n        }, 5000);\n        video.id = event.streamid;\n        // to keep room-id in cache\n        localStorage.setItem(connection.socketMessageEvent, connection.sessionid);\n        if (event.type === 'local') {\n            connection.socket.on('disconnect', function() {\n                if (!connection.getAllParticipants().length) {\n                    location.reload();\n                }\n            });\n        }\n        if(connection.getAllParticipants().length > 0 && $scope.userRole === 'member' && !intervalPayment) {\n          intervalPayment = $interval(function () {\n            if($scope.second === 60){\n                $scope.second = 0;\n                $scope.streamingInfo.time++;\n                sendPaidTokens();\n            }\n            $scope.second++;\n          }, 1000);\n        }\n      };\n\n      connection.onstreamended = function(event) {\n          var mediaElement = document.getElementById(event.streamid);\n          if (mediaElement) {\n              mediaElement.parentNode.removeChild(mediaElement);\n          }\n          alertify.message('Chat will end now', 30);\n          $timeout(endStream, 6000);\n      };\n      connection.onMediaError = function(e) {\n          if (e.message === 'Concurrent mic process limit.') {\n              if (DetectRTC.audioInputDevices.length <= 1) {\n                  alert('Please select external microphone. Check github issue number 483.');\n                  return;\n              }\n              var secondaryMic = DetectRTC.audioInputDevices[1].deviceId;\n              connection.mediaConstraints.audio = {\n                  deviceId: secondaryMic\n              };\n              document.getElementById('join-room').onclick();\n          }\n      };\n      $scope.stopStreaming = function() {\n        if (appSettings.USER && appSettings.USER.role == 'member') {\n          socket.emit('stop-video-request',\n          {\n            data: {\n              modelId: $scope.modelId,\n            }\n          });\n        }\n        socket.emit('model-leave-room');\n        endStream();\n      };\n      function endStream() {\n        if(appSettings.USER.role == 'model'){\n          $window.location.href = '/models/live';\n        } else {\n          $window.location.href = '/';\n        }\n      }\n\n      function sendPaidTokens() {\n        userService.sendPaidTokens($scope.modelId, 'private').then(function (response)\n        {\n          if(response.data && parseInt(response.data.spend) > 0){\n              $scope.streamingInfo.spendTokens += parseInt(response.data.spend);\n              $scope.streamingInfo.tokens = response.data.tokens;\n              socket.sendModelReceiveInfo({time: 1, tokens: response.data.spend});\n          }\n          if (response.data.success == false) {\n             socket.emit('member-missing-tokens', $scope.chatType);\n             return alertify.error('Credit is finished and chat will end', 6, endStream);\n          }\n        });\n      }\n\n      // show full screen\n      $scope.isFullScreenMode = false;\n      $scope.showFullScreen = function() {\n          $scope.isFullScreenMode = true;\n          $('.header').addClass('hidden');\n          $('.line-menu').addClass('hidden');\n          $('.footer').addClass('hidden');\n          $('body').addClass('fullscreen-mode');\n          $('.panel-heading').addClass('hidden');\n          $('.private-chat-instruction').addClass('hidden');\n          $scope.isFullScreenMode = true;\n      };\n      $scope.notShowFullScreen = function() {\n          $scope.isFullScreenMode = false;\n          $('.header').removeClass('hidden');\n          $('.line-menu').removeClass('hidden');\n          $('.footer').removeClass('hidden');\n          $('body').removeClass('fullscreen-mode');\n          $('.panel-heading').removeClass('hidden');\n          $('.private-chat-instruction').removeClass('hidden');\n      };\n    }\n  };\n}]);","angular.module('matroshkiApp').directive('mGroupChatVideo', ['appSettings', '$timeout', '$interval', 'socket', 'VideoStream', 'peerService', '$sce', 'onlineService', 'userService', function (appSettings, $timeout, $interval, socket, VideoStream, peerService, $sce, onlineService, userService) {\n  return {\n    restrict: 'AE',\n    templateUrl: appSettings.BASE_URL + 'app/views/partials/group-chat-video-widget.html',\n    scope: {\n      modelId: '=modelId',\n      memberId: '=memberId',\n      room: '@',\n      onModelRoom: '@',\n      virtualRoom: '@',\n      streamingInfo: \"=ngModel\"\n    },\n    controller: function controller($scope, userService, PerformerChat, $window) {\n      $scope.userRole = appSettings.USER.role;\n      const streams = [];\n      $scope.isShowLargeVideo = false;\n      $scope.second = 60;\n      $scope.streamingInfo.type = 'group';\n      $scope.startConversation = function() {\n          connection.open($scope.virtualRoom, function(isRoomOpened, roomid, error) {\n              if(isRoomOpened === true) {\n                $scope.modelStreaming = true;\n                peerService.joinGroupRoom($scope.virtualRoom, {\n                  memberId: $scope.memberId,\n                  modelId: $scope.modelId,\n                  type: 'group',\n                  room: $scope.room\n                });\n              }\n              else {\n                if(error === 'Room not available') {\n                  alert('Someone already created this room. Please either join or create a separate room.');\n                  return;\n                }\n                alert(error);\n              }\n          });\n      };\n      $scope.joinConversation = function() {\n        userService.get().then(function (data) {\n          if (data.data) {\n            if (parseInt(data.data.tokens) < 1) {\n              return alertify.error('Your tokens do not enought, please buy more.');\n            } else {\n              connection.join($scope.virtualRoom, function(isJoinedRoom, roomid, error) {\n                if (error) {\n                    if(error === 'Room not available') {\n                      alert('This room does not exist. Please either create it or wait for moderator to enter in the room.');\n                      return;\n                    }\n                    alert(error);\n                }\n                $scope.userStreaming = true;\n                $scope.$$phase || $scope.$apply();\n              });\n            }\n          } else {\n            return false;\n          }\n        });\n\n      };\n      // ......................................................\n      // ..................RTCMultiConnection Code.............\n      // ......................................................\n      var connection = new RTCMultiConnection();\n      // by default, socket.io server is assumed to be deployed on your own URL\n      // comment-out below line if you do not have your own socket.io server\n      connection.socketURL = appSettings.RTC_URL;\n      connection.socketMessageEvent = 'video-conference-' + $scope.room;\n      connection.session = {\n          audio: true,\n          video: true\n      };\n      connection.sdpConstraints.mandatory = {\n          OfferToReceiveAudio: true,\n          OfferToReceiveVideo: true\n      };\n      connection.videosContainer = document.getElementById('groupchat-videos-container');\n      connection.onstream = function(event) {\n          var existing = document.getElementById(event.streamid);\n          if(existing && existing.parentNode) {\n            existing.parentNode.removeChild(existing);\n          }\n          event.mediaElement.removeAttribute('src');\n          event.mediaElement.removeAttribute('srcObject');\n          event.mediaElement.muted = true;\n          event.mediaElement.volume = 0;\n          var video = document.createElement('video');\n          try {\n              video.setAttributeNode(document.createAttribute('autoplay'));\n              video.setAttributeNode(document.createAttribute('playsinline'));\n          } catch (e) {\n              video.setAttribute('autoplay', true);\n              video.setAttribute('playsinline', true);\n          }\n          if(event.type === 'local') {\n            video.volume = 0;\n            try {\n                video.setAttributeNode(document.createAttribute('muted'));\n            } catch (e) {\n                video.setAttribute('muted', true);\n            }\n          }\n          streams.push({\n            id: event.streamid,\n            stream: event.stream\n          });\n          video.srcObject = event.stream;\n          video.controls = true;\n          video.className = 'video-in-group';\n          connection.videosContainer.appendChild(video);\n          setTimeout(function() {\n            video.play();\n          }, 5000);\n          video.id = event.streamid;\n          // to keep room-id in cache\n          localStorage.setItem(connection.socketMessageEvent, connection.sessionid);\n          if(event.type === 'local') {\n            connection.socket.on('disconnect', function() {\n              if(!connection.getAllParticipants().length) {\n                location.reload();\n              }\n            });\n          }\n          if(connection.getAllParticipants().length > 0 && $scope.userRole === 'member') {\n            $interval(function () {\n              if($scope.second === 60){\n                  $scope.second = 0;\n                  $scope.streamingInfo.time++;\n                  sendPaidTokens();\n              }\n              $scope.second++;\n            }, 1000);\n          }\n      };\n\n      //change large video\n      $(document).on('click', '.video-in-group', function() {\n        $('.video-in-group').removeClass('active');\n        $(this).addClass('active');\n        const streamId = $(this).attr('id');\n        const stream = streams.find(str => streamId === str.id);\n        const videoCurr = document.getElementById('currentvideo-groupchat');\n        if(stream) {\n          videoCurr.srcObject = stream.stream;\n          setTimeout(function() {\n            videoCurr.play();\n            $scope.isShowLargeVideo = true;\n            $scope.$$phase || $scope.$apply();\n          });\n        }\n      });\n\n      connection.onstreamended = function(event) {\n          var mediaElement = document.getElementById(event.streamid);\n          if (mediaElement) {\n              mediaElement.parentNode.removeChild(mediaElement);\n          }\n      };\n      connection.onMediaError = function(e) {\n          if (e.message === 'Concurrent mic process limit.') {\n              if (DetectRTC.audioInputDevices.length <= 1) {\n                  alert('Please select external microphone. Check github issue number 483.');\n                  return;\n              }\n              var secondaryMic = DetectRTC.audioInputDevices[1].deviceId;\n              connection.mediaConstraints.audio = {\n                  deviceId: secondaryMic\n              };\n              connection.join(connection.sessionid);\n          }\n      };\n\n      $scope.stopStreaming = function() {\n        socket.emit('model-leave-room');\n        endStream();\n      };\n      function endStream() {\n        if(appSettings.USER.role == 'model'){\n          $window.location.href = '/models/live';\n        } else {\n          $window.location.href = '/';\n        }\n      }\n      /**\n       * process payment per minute\n       */\n      function sendPaidTokens() {\n        userService.sendPaidTokens($scope.modelId, 'group').then(function (response) {\n          if (response.data && parseInt(response.data.spend) > 0) {\n            $scope.streamingInfo.spendTokens += parseInt(response.data.spend);\n            $scope.streamingInfo.tokens = response.data.tokens;\n            socket.sendModelReceiveInfo({ member: $scope.memberId, time: 1, tokens: response.data.spend });\n          }\n          if (response.data.success == false) {\n            alertify.error('Your tokens do not enough, please buy more.', 5, endStream);\n            socket.emit('member-missing-tokens', $scope.chatType);\n            return;\n          }\n        });\n      }\n    }\n  };\n}]);","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n'use strict';\n\nangular.module('matroshkiApp').directive('uploadFile', ['appSettings', 'mediaService', function (appSettings, mediaService) {\n\n    return {\n      restrict: 'AE',\n      template: '<div><input type=\"hidden\" name=\"myFiles\" ng-model=\"myFiles\"><div id=\"mulitplefileuploader\">Upload</div><div id=\"status\"></div></div>',\n      require: 'ngModel',\n      replace: true,\n      scope: {\n        myfiles: '=ngModel',\n        fileName: '@',\n        multiple: '@',\n        showDelete: '@',\n        showPreview: '@',\n        allowedTypes: '@',\n        mediaType: '@',\n        parentId: '@',\n        showDone: '@'\n      },\n//      templateUrl: appSettings.BASE_URL + 'app/views/partials/editor.html',\n      link: function (scope, elem, attr, ngModel) {\n        var current = [];\n//        scope.myPhotos = ngModelCtrl;\n        if (!ngModel)\n          return; // do nothing if no ng-model\n\n        // Specify how UI should be updated\n//        ngModel.$render = function () {\n//          \n//        };\n        ngModel.$render = function () {\n//          elem.html(ngModel.$viewValue || '');\n        };\n        var mediaType = (scope.mediaType) ? scope.mediaType : '';\n        var parentId = (scope.parentId) ? scope.parentId : 0;\n        var settings = {\n          url: appSettings.BASE_URL + 'api/v1/upload-items?parent-id='+parentId+'&mediaType='+mediaType,\n          method: \"POST\",\n          allowedTypes: \"jpg,png,gif,jpeg,mp4,m4v,ogg,ogv,webm\",\n          fileName: \"myFiles\",\n          multiple: true,\n          showDelete: true,\n          showPreview: false,\n          showDone: true,\n          statusBarWidth: '55%',\n          dragdropWidth: '55%',\n          onSuccess: function (files, data, xhr)\n          {\n\n            if (data.success == true) {\n//              ngModelCtrl.$viewValue = data.fileName;\n//              scope.$apply(function () {\n//                ngModelCtrl.$setViewValue(data.fileName);\n//                ngModelCtrl.$setViewValue('StackOverflow');\n//              });\n//              scope.$watch('myPhotos', function (value) {\n//                if (ngModelCtrl.$viewValue != value) {\n//                  ngModelCtrl.$setViewValue(data.fileName);\n//                  \n//                }\n//              });\n\n\n              current.push(data.file.id);\n              ngModel.$setViewValue(current);\n\n              $(\"#status\").html(\"<font color='green'>\" + data.message + \"</font>\");\n            } else {\n              $(\"#status\").html(\"<font color='red'>\" + data.message + \"</font>\");\n            }\n\n          },\n          onError: function (files, status, errMsg)\n          {\n            $(\"#status\").html(\"<font color='red'>Upload is Failed</font>\");\n          },\n          deleteCallback: function (element, data, pd) {\n\n            if (element.file.type.indexOf('image') != -1) {\n              mediaService.deleteImage(element.file.id).then(function (data) {\n                if (data.data.success) {\n                  var index = current.indexOf(element.file.id);\n                  current.splice(index, 1);\n                  ngModel.$setViewValue(current);\n                  alertify.success(data.data.message);\n                } else {\n                  alertify.error(data.data.message);\n                }\n              });\n            } else if (element.file.type.indexOf('video') != -1) {\n              mediaService.deleteVideo(element.file.id).then(function (data) {\n                if (data.data.success) {\n                  var index = current.indexOf(element.file.id);\n                  current.splice(index, 1);\n                  ngModel.$setViewValue(current);\n                  alertify.success(data.data.message);\n                } else {\n                  alertify.error(data.data.message);\n                }\n              });\n            }\n          }\n        };\n        $(\"#mulitplefileuploader\").uploadFile(settings);\n\n      }\n\n\n    };\n  }]);\n\n","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n'use strict';\n\nangular.module('matroshkiApp').directive('multipleUpload', ['appSettings', 'mediaService', function (appSettings, mediaService) {\n\n    return {\n      restrict: 'AE',\n      template: '<div><input type=\"hidden\" name=\"myfiles\" ng-model=\"myFiles\"><div id=\"mulitplefileuploader\">Upload</div><div id=\"status\"></div></div>',\n      require: 'ngModel',\n      replace: true,\n      scope: {\n        files: '=ngModel',\n        fileName: '@',\n        multiple: '@',\n        showDelete: '@',\n        showPreview: '@',\n        allowedTypes: '@',\n        mediaType: '@',\n        parentId: '@',\n        showDone: '@',\n        modelId: '@'\n      },\n      link: function (scope, elem, attr, ngModel) {\n        var myFiles = [];\n\n        if (!ngModel)\n          return; // do nothing if no ng-model\n\n        // Specify how UI should be updated\n//        ngModel.$render = function () {\n//          \n//        };\n\n        ngModel.$render = function () {\n\n        };\n        var mediaType = (scope.mediaType) ? scope.mediaType : '';\n        var parentId = (scope.parentId) ? scope.parentId : null;\n        var modelId = (scope.modelId) ? scope.modelId : null;\n        var settings = {\n          url: appSettings.BASE_URL + 'api/v1/upload-items?mediaType=' + mediaType + '&parent-id=' + parentId + '&model-id=' + modelId,\n          method: \"POST\",\n          allowedTypes: scope.allowedTypes,\n          fileName: 'myFiles',\n          multiple: scope.multiple,\n          showDelete: scope.showDelete,\n          showPreview: scope.showPreview,\n          showDone: scope.showDone,\n          statusBarWidth: '100%',\n          dragdropWidth: '100%',\n          onSuccess: function (files, data, xhr, pd)\n          {\n\n            if (data.success == true) {\n\n              myFiles.push(data.file);\n\n              ngModel.$setViewValue(myFiles);\n//              alertify.success(files);\n//              console.log(pd);\n              var uploadName = pd.filename[0].innerHTML;\n              alertify.success(uploadName + ' ' + data.message)\n//              $(\"#status\").html(\"<font color='green'>\" + data.message + \"</font>\");\n            } else {\n//              $(\"#status\").html(\"<font color='red'>\" + data.message + \"</font>\");\n              alertify.error(data.message);\n            }\n\n          },\n          onError: function (files, status, errMsg)\n          {\n            $(\"#status\").html(\"<font color='red'>Upload is Failed</font>\");\n          },\n          deleteCallback: function (element, data, pd) {\n\n            if (element.file.type.indexOf('image') != -1) {\n              mediaService.deleteImage(element.file.id).then(function (data) {\n                if (data.data.success) {\n                  var index = myFiles.indexOf(element.file.id);\n                  myFiles.splice(index, 1);\n                  ngModel.$setViewValue(myFiles);\n                  alertify.success(data.data.message);\n                } else {\n                  alertify.error(data.data.message);\n                }\n              });\n            } else if (element.file.type.indexOf('video') != -1) {\n              mediaService.deleteVideo(element.file.id).then(function (data) {\n                if (data.data.success) {\n                  var index = myFiles.indexOf(element.file.id);\n                  myFiles.splice(index, 1);\n                  ngModel.$setViewValue(myFiles);\n                  alertify.success(data.data.message);\n                } else {\n                  alertify.error(data.data.message);\n                }\n              });\n            }\n          }\n        };\n        $(\"#mulitplefileuploader\").uploadFile(settings);\n\n      }\n\n\n    };\n  }]);\n\n","'use strict';\nangular.module('matroshkiApp')\n.directive('checkUserOnline', ['socket', 'userService', function (socket, userService) {\n\treturn {\n\t  restrict: 'A',\n\t  scope: {\n        userId: '@'\n      },\n\t  template: `<span ng-class=\"{'text-warning': !online, 'text-success': online && !isBusy , 'text-danger': isBusy}\"><i class=\"fa fa-circle\"></i>\n\t              <span ng-show=\"!online\">Offline</span><span ng-show=\"online && !isBusy\">Online</span><span ng-show=\"isBusy\">Busy</span></span>`,\n\t  link: function (scope) {\n\t  \tuserService.checkBusy(scope.userId).then(function(data) {\n\t  \t\tif(data.data.isBusy) {\n\t  \t\t\tscope.isBusy = true;\n\t  \t\t}\n\t  \t});\n\t    socket.emit('checkOnline', scope.userId.toString(), function(data) {\n\t    \tscope.online = data.isOnline;\n\t    });\n\t  }\n\t};\n}]);"]}